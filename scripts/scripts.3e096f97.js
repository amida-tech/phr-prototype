"use strict";angular.module("phrPrototypeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","mgcrea.ngStrap","d3"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/account",{templateUrl:"views/account.html",controller:"AccountCtrl"}).when("/reset",{templateUrl:"views/reset.html",controller:"ResetCtrl"}).when("/account",{templateUrl:"views/account.html",controller:"AccountCtrl"}).when("/files",{templateUrl:"views/files.html",controller:"FilesCtrl"}).when("/record",{templateUrl:"views/record.html",controller:"RecordCtrl"}).when("/record/allergies",{templateUrl:"views/record/allergies.html",controller:"RecordAllergiesCtrl"}).when("/record/encounters",{templateUrl:"views/record/encounters.html",controller:"RecordEncountersCtrl"}).when("/record/immunizations",{templateUrl:"views/record/immunizations.html",controller:"RecordImmunizationsCtrl"}).when("/billing/claims",{templateUrl:"views/billing/claims.html",controller:"BillingClaimsCtrl"}).when("/billing/insurance",{templateUrl:"views/billing/insurance.html",controller:"BillingInsuranceCtrl"}).when("/record/medications",{templateUrl:"views/record/medications.html",controller:"RecordMedicationsCtrl"}).when("/record/conditions",{templateUrl:"views/record/conditions.html",controller:"RecordConditionsCtrl"}).when("/record/procedures",{templateUrl:"views/record/procedures.html",controller:"RecordProceduresCtrl"}).when("/record/vitals",{templateUrl:"views/record/vitals.html",controller:"RecordVitalsCtrl"}).when("/record/results",{templateUrl:"views/record/results.html",controller:"RecordResultsCtrl"}).when("/record/social",{templateUrl:"views/record/social.html",controller:"RecordSocialCtrl"}).when("/review",{templateUrl:"views/review.html",controller:"ReviewCtrl"}).when("/review/allergies",{templateUrl:"views/review/allergies.html",controller:"ReviewAllergiesCtrl"}).when("/record/allergies/review",{templateUrl:"views/record/allergies/review.html",controller:"RecordAllergiesReviewCtrl"}).when("/record/download",{templateUrl:"views/record/download.html",controller:"RecordDownloadCtrl"}).when("/files/upload",{templateUrl:"views/files/upload.html",controller:"FilesUploadCtrl"}).when("/record/encounters/review",{templateUrl:"views/record/encounters/review.html",controller:"RecordEncountersReviewCtrl"}).when("/record/immunizations/review",{templateUrl:"views/record/immunizations/review.html",controller:"RecordImmunizationsReviewCtrl"}).when("/record/conditions/review",{templateUrl:"views/record/conditions/review.html",controller:"RecordConditionsReviewCtrl"}).when("/record/medications/review",{templateUrl:"views/record/medications/review.html",controller:"RecordMedicationsReviewCtrl"}).when("/record/procedures/review",{templateUrl:"views/record/procedures/review.html",controller:"RecordProceduresReviewCtrl"}).when("/record/results/review",{templateUrl:"views/record/results/review.html",controller:"RecordResultsReviewCtrl"}).when("/record/vitals/review",{templateUrl:"views/record/vitals/review.html",controller:"RecordVitalsReviewCtrl"}).when("/record/social/review",{templateUrl:"views/record/social/review.html",controller:"RecordSocialReviewCtrl"}).when("/notes",{templateUrl:"views/notes.html",controller:"NotesCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("phrPrototypeApp").controller("MainCtrl",["$scope","$location","authentication",function(a,b,c){a.login=function(){c.login(a.inputLogin,a.inputPassword,function(c){c?a.error=c:b.path("/home")})}}]),angular.module("phrPrototypeApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("phrPrototypeApp").controller("LoginCtrl",["$scope","$location","authentication",function(a,b,c){a.login=function(){c.login(a.inputLogin,a.inputPassword,function(c){c?a.error=c:b.path("/home")})}}]),angular.module("phrPrototypeApp").service("authentication",["$location",function(a){this.login=function(a,b,c){a&&b&&c("test"===a&&"test"===b||"test@amida-demo.com"===a&&"test"===b?null:"Invalid Login and/or Password.")},this.logout=function(a){var b=null;a(b?b:null)},this.authStatus=function(b){"/"===a.path()||"/login"===a.path()||"/register"===a.path()||"/reset"===a.path()?b(null,!1):b(null,!0)}}]),angular.module("phrPrototypeApp").controller("HomeCtrl",["$scope","history","notes","record",function(a,b,c,d){function e(){c.noteCount(function(b,c){a.noteCount=c})}function f(){d.getRecord(function(b,c){a.entries=c})}function g(){b.account(function(b,c){if(b)console.log(b);else{for(var d in c.recordHistory)"upload"===c.recordHistory[d].type?c.recordHistory[d].displayType="New Record Uploaded":"download"===c.recordHistory[d].type?c.recordHistory[d].displayType="Record Downloaded":"login"===c.recordHistory[d].type&&(c.recordHistory[d].displayType="Logged In"),console.log();a.accountHistory=c}})}a.accountHistory={},a.noteCount=0,e(),f(),g()}]),angular.module("phrPrototypeApp").service("history",function(){this.account=function(a){var b=null,c={lastLogin:"9/30/2014",lastUpdate:"7/31/2014",recordHistory:[{type:"login",date:"9/30/2014"},{type:"download",date:"6/30/2014"},{type:"upload",date:"12/23/2013",file:{name:"CCDA_1.xml"}}]};b?a(b):a(null,c)}}),angular.module("phrPrototypeApp").directive("timeline",["$window","$location","$anchorScroll","d3Service",function(a,b,c,d){return{restrict:"EA",template:"<svg style='width:100%;'></svg>",link:function(e,f,g){d.d3tip().then(function(d){function h(){var a=[];r=[],s=[],a=e[g.chartData];var b,c,f,h,i=g.chartType,j=[];if("account"===i){for(var k in a.recordHistory){var l=w.parse(a.recordHistory[k].date);r.push({date:l}),j.push(l)}b=d.min(j),c=d.max(j),f=d.time.month.floor(d.time.month.offset(b,-2)),h=d.time.month.floor(d.time.month.offset(c,2)),s=[f,h]}else _.each(a,function(a){var b;a.data.date_time&&(a.data.date_time.plotDate&&(b=x.parse(a.data.date_time.plotDate)),_.isNull(b)&&(b=y.parse(a.data.date_time.plotDate)),r.push({date:b}),j.push(b))}),b=d.min(j),c=d.max(j),f=d.time.month.floor(d.time.month.offset(b,-2)),h=d.time.month.floor(d.time.month.offset(c,2)),s=[f,h]}function i(){function a(){g=parseInt(v.style("width"),10)}function b(){j=d.time.scale().range([m+n/2,g-(m-n/2)]).domain(s)}function c(){t=[];var a=j.ticks(20);for(var b in a)t.push({x_axis:j(a[b]),y_axis:(l-o-p)/2})}function e(){for(var a in r)r[a].x_axis=j(r[a].date),r[a].y_axis=(l-o-p)/2,r[a].radius=10,r[a].color=q,r[a].href="entry"+a}function f(){v.selectAll("*").remove();{var a=[{x:m,y:0,width:n,height:l-o-p,color:q},{x:g-m,y:0,width:n,height:l-o-p,color:q}],b=[{x:m,y:(l-o-p)/2-1,width:g-m-m,height:3,color:q}],c=d.time.format("%b %Y"),e=[{x:0,y:l-p,anchor:"start",text:c(s[0])},{x:g,y:l-p,anchor:"end",text:c(s[1])}],f=v.selectAll("text").data(e).enter().append("text"),h=(f.attr("x",function(a){return a.x}).attr("y",function(a){return a.y}).text(function(a){return a.text}).style("text-anchor",function(a){return a.anchor}),v.selectAll("plotBoundary").data(a).enter().append("rect")),i=(h.attr("x",function(a){return a.x}).attr("y",function(a){return a.y}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).style("fill",function(a){return a.color}),v.selectAll("plotLine").data(b).enter().append("rect")),j=(i.attr("x",function(a){return a.x}).attr("y",function(a){return a.y}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).style("fill",function(a){return a.color}),v.selectAll("plotPoint").data(r).enter().append("circle"));j.attr("cx",function(a){return a.x_axis}).attr("cy",function(a){return a.y_axis}).attr("r",function(a){return a.radius}).attr("class","plotPoint").on("mouseover",function(a){var b=d.time.format("%m/%d/%Y");z.attr("class","d3-tip animate").html(function(a){return"<span>"+b(a.date)+"</span>"}).show(a)}).on("mouseout",function(a){z.attr("class","d3-tip").show(a),z.hide()}).on("click",function(a){k(a.href)})}}var g;a(),b(),c(),e(),f()}var j,k=function(a){b.hash(a),c()},l=60,m=15,n=3,o=30,p=5,q="#6AA6FF",r=[],s=[],t=[];d=a.d3;var u=f.find("svg")[0],v=d.select(u).attr("height",l),w=d.time.format("%m/%d/%Y"),x=d.time.format("%Y-%m-%dT%H:%M:%SZ"),y=d.time.format("%Y-%m-%dT%H:%M:%S.%LZ"),z=d.tip();z.attr("class","d3-tip").html(function(){return"Entry"}),v.call(z),h(),i(),a.onresize=function(){e.$apply(),i()},e.$watch("inactiveFlag",function(){h(),i()},!0)})}}}]),angular.module("phrPrototypeApp").controller("NavbarCtrl",["$rootScope","$scope","$location","authentication",function(a,b,c,d){function e(){d.authStatus(function(a,c){a?(b.loginStatus=!1,console.log(a)):b.loginStatus=c?!0:!1})}b.loginStatus=!1,e(),a.$on("$locationChangeStart",function(){e()})}]),angular.module("phrPrototypeApp").controller("RegisterCtrl",["$scope","$location",function(a,b){a.step=0,a.registration={},a.nextStep=function(){if(0===a.step){if(a.inputPassword!==a.inputRepeatPassword)return void(a.error="Entered Passwords did not match");a.step=a.step+1}else a.step=a.step+1,console.log(a.step)},a.finish=function(){b.path("/home")}}]),angular.module("phrPrototypeApp").controller("ProfileCtrl",["$scope","$location","$anchorScroll","account",function(a,b,c,d){a.profile={},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},d.account(function(b,c){a.profile=c;var d=moment(c.dob[0].date).format("YYYY-MM-DD");a.profile.dob=d,a.profile.primaryEmail=c.email[0].email})}]),angular.module("phrPrototypeApp").controller("AccountCtrl",["$scope","$location",function(a,b){a.resetPassword=function(){b.path("/home")}}]),angular.module("phrPrototypeApp").controller("ResetCtrl",["$scope","$location",function(a,b){a.step=0,a.nextStep=function(){a.step=a.step+1},a.finish=function(){b.path("/")},a.resend=function(){a.inputEmail="",a.step=0}}]),angular.module("phrPrototypeApp").service("account",function(){this.account=function(a){var b={name:{middle:["Isa"],last:"Jones",first:"Isabella"},dob:[{date:"1975-05-01T00:00:00Z",precision:"day"}],gender:"Female",identifiers:[{identifier:"2.16.840.1.113883.19.5.99999.2",identifier_type:"998991"},{identifier:"2.16.840.1.113883.4.1",identifier_type:"111-00-2330"}],marital_status:"Married",addresses:[{streetLines:["1357 Amber Drive"],city:"Beaverton",state:"OR",zip:"97867",country:"US",use:"primary home"}],phone:[{number:"(816)276-6909",type:"primary home"}],email:[{email:"test@fake.com",type:"primary home"},{email:"test@fakework.com",type:"primary work"}],race_ethnicity:"White",languages:[{language:"English",preferred:!0,mode:"Expressed spoken",proficiency:"Good"}],religion:"Christian (non-Catholic, non-specific)",birthplace:{city:"Beaverton",state:"OR",zip:"97867",country:"US"},guardians:[{relation:"Parent",addresses:[{streetLines:["1357 Amber Drive"],city:"Beaverton",state:"OR",zip:"97867",country:"US",use:"primary home"}],names:[{last:"Jones",first:"Ralph"}],phone:[{number:"(816)276-6909",type:"primary home"}]}]};a(null,b)}}),angular.module("phrPrototypeApp").directive("profile",function(){return{templateUrl:"views/templates/profile.html",restrict:"EA",link:function(){}}}),angular.module("phrPrototypeApp").controller("FilesCtrl",["$scope","files",function(a,b){a.fileList=[],b.getFiles(function(b,c){a.fileList=c}),a.predicate="name",a.nameSort=function(){a.predicate="-"===a.predicate.substring(0,1)&&"name"===a.predicate.substring(1)?"name":"-name"},a.typeSort=function(){a.predicate="-"===a.predicate.substring(0,1)&&"type"===a.predicate.substring(1)?"type":"-type"},a.modifiedSort=function(){a.predicate="-"===a.predicate.substring(0,1)&&"modified"===a.predicate.substring(1)?"modified":"-modified"}}]),angular.module("phrPrototypeApp").service("files",function(){this.getFiles=function(a){var b=[{name:"consolidated_cda_one.xml",type:"Health Summary",modified:"12/13/2012 2:09 PM"},{name:"provider_record.xml",type:"Health Summary",modified:"12/13/2012 2:09 PM"},{name:"chest_xray.png",type:"Image",modified:"12/13/2012 2:09 PM"}];a(null,b)}}),angular.module("phrPrototypeApp").directive("breadcrumb",["$location",function(a){return{template:'<span ng-repeat="(index, entry) in pageBreadCrumb"><span ng-if="index !== (pageBreadCrumb.length - 1)"><a href="{{entry.path}}">{{entry.name}}</a><span> <i class="fa fa-angle-right"></i> </span></span><span ng-if="index === (pageBreadCrumb.length - 1)">{{entry.name}}</span></span>',restrict:"EA",link:function(b){var c=function(){var b=[],c=a.path().split("/"),d="";for(var e in c){var f={};""===c[e]&&(d="#/home/",f.name="Home",f.path=d),"files"===c[e]&&(d="#/files",f.name="My Files",f.path=d),"record"===c[e]&&(d="#/record/",f.name="My Record",f.path=d),"profile"===c[e]&&(d="#/profile",f.name="My Profile",f.path=d),"allergies"===c[e]&&(d=d+c[e]+"/",f.name="My Allergies",f.path=d),"encounters"===c[e]&&(d=d+c[e]+"/",f.name="My Encounters",f.path=d),"billing"===c[e]&&(d="#/billing/insurance/",f.name="My Billing",f.path=d),"claims"===c[e]&&(d=d+c[e]+"/",f.name="My Claims",f.path=d),"insurance"===c[e]&&(d=d+c[e]+"/",f.name="My Insurance",f.path=d),"immunizations"===c[e]&&(d=d+c[e]+"/",f.name="My Immunizations",f.path=d),"medications"===c[e]&&(d=d+c[e]+"/",f.name="My Medications",f.path=d),"conditions"===c[e]&&(d=d+c[e]+"/",f.name="My Conditions",f.path=d),"procedures"===c[e]&&(d=d+c[e]+"/",f.name="My Procedures",f.path=d),"vitals"===c[e]&&(d=d+c[e]+"/",f.name="My Vital Signs",f.path=d),"results"===c[e]&&(d=d+c[e]+"/",f.name="My Test Results",f.path=d),"social"===c[e]&&(d=d+c[e]+"/",f.name="My Social History",f.path=d),"review"===c[e]&&(d=d+c[e]+"/",f.name="Review Updates",f.path=d),"download"===c[e]&&(d=d+c[e]+"/",f.name="Download Record",f.path=d),"upload"===c[e]&&(d=d+c[e]+"/",f.name="Upload Record",f.path=d),"account"===c[e]&&(d=d+c[e]+"/",f.name="My Account",f.path=d),"notes"===c[e]&&(d=d+c[e]+"/",f.name="My Notes",f.path=d),b.push(f)}return b};b.pageBreadCrumb=c()}}}]),angular.module("phrPrototypeApp").controller("RecordCtrl",["$scope","$window","record","format",function(a,b,c,d){function e(){function b(a,b){var c=703*a/(b*b);return c=c.toFixed(1)}var c=[],d=[],e=[],f=[];_.each(a.entries.vitals,function(a){"Height"===a.data.vital.name&&_.each(a.data.date_time,function(a){d.push(moment(a.date))}),"Patient Body Weight - Measured"===a.data.vital.name&&_.each(a.data.date_time,function(a){c.push(moment(a.date))}),"Intravascular Systolic"===a.data.vital.name&&_.each(a.data.date_time,function(a){e.push(moment(a.date))}),"Intravascular Diastolic"===a.data.vital.name&&_.each(a.data.date_time,function(a){f.push(moment(a.date))})});var g=moment.max(d),h=moment.max(c),i=moment.max(f),j=moment.max(e);if(_.each(a.entries.vitals,function(b){"Height"===b.data.vital.name&&_.each(b.data.date_time,function(c){moment(moment(c.date)).isSame(g,"day")&&(a.dashMetrics.height={value:b.data.value,unit:b.data.unit})}),"Patient Body Weight - Measured"===b.data.vital.name&&_.each(b.data.date_time,function(c){moment(moment(c.date)).isSame(h,"day")&&(a.dashMetrics.weight={value:b.data.value,unit:b.data.unit})}),"Intravascular Systolic"===b.data.vital.name&&_.each(b.data.date_time,function(c){moment(moment(c.date)).isSame(j,"day")&&(a.dashMetrics.systolic={value:b.data.value,unit:b.data.unit})}),"Intravascular Diastolic"===b.data.vital.name&&_.each(b.data.date_time,function(c){moment(moment(c.date)).isSame(i,"day")&&(a.dashMetrics.diastolic={value:b.data.value,unit:b.data.unit})})}),"[in_i]"===a.dashMetrics.height.unit){var k=Math.floor(a.dashMetrics.height.value/12)+"' "+a.dashMetrics.height.value%12+'"';a.dashMetrics.height.disp=k}if("[lb_av]"===a.dashMetrics.weight.unit){var l=a.dashMetrics.weight.value+" lbs";a.dashMetrics.weight.disp=l}a.dashMetrics.bmi=b(a.dashMetrics.weight.value,a.dashMetrics.height.value)}function f(){_.each(a.entries,function(b,c){_.each(b,function(b){var d=b;d.category=c,a.entryList.push(d)})}),_.each(a.entryList,function(a){if(_.each(a.data.date_time,function(a,b){"displayDate"!==b&&"plotDate"!==b&&d.formatDate(a)}),"results"===a.category){var b=[];a.data.date_time={},a.data.results&&_.each(a.data.results,function(a){_.each(a.date_time,function(a,c){"displayDate"!==c&&"plotDate"!==c&&(d.formatDate(a),b.push(moment(a.date)))}),a.date_time.displayDate=d.outputDate(a.date_time)});var c=moment.min(b),e=moment.max(b);c.isSame(e,"day")&&(a.data.date_time.point={},a.data.date_time.point.date=c.toISOString(),a.data.date_time.point.precision="day",a.data.date_time.point.displayDate=d.formatDate(a.data.date_time.point))}a.data.date_time.displayDate=d.outputDate(a.data.date_time),a.data.date_time.plotDate=d.plotDate(a.data.date_time)})}function g(){a.entryList=_.sortBy(a.entryList,function(a){return a.data.date_time.plotDate}),a.entryList.reverse()}c.getRecord(function(b,c){a.entries=c}),a.dashMetrics={},a.tabs=[{title:"Weight",data:{},chartName:"d3template"},{title:"Blood Pressure",data:{},chartName:"d3template"}],a.tabs.activeTab=0,a.$watch("tabs.activeTab",function(b,c){b!==c&&a.$broadcast("tabchange",{val:b})}),a.entryList=[],e(),f(),g()}]),angular.module("phrPrototypeApp").controller("RecordAllergiesCtrl",["$scope","$location","$anchorScroll","allergies","format","partial",function(a,b,c,d,e,f){function g(){a.updateDate="12/1/2014"}function h(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function i(){f.getPartialMatches(a.entryType,function(b,c){a.partialEntries=c})}function j(){a.entries=a.inactiveFlag===!1?_.filter(_.clone(a.masterEntries),function(a){return a.data.observation&&a.data.observation.status?"Active"===a.data.observation.status.name?!0:!1:void 0}):_.clone(a.masterEntries)}function k(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}a.entryType="allergies",a.masterEntries=[],a.entries=[],a.updateDate=null,a.inactiveFlag=!1,a.partialEntries=[],a.alertShow=!0,a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.closeAlert=function(){a.alertShow=!1},a.refresh=function(){h(function(){g(),k(),j(),i()})},a.$watch("inactiveFlag",function(){j()}),a.refresh()}]),angular.module("phrPrototypeApp").service("record",["allergies","conditions","encounters","immunizations","medications","procedures","results","social","vitals",function(a,b,c,d,e,f,g,h,i){this.getRecord=function(j){function k(){m===n&&j(null,l)}var l={},m=0,n=9;a.getRecord(function(a,b){l.allergies=b,m++,k()}),b.getRecord(function(a,b){l.conditions=b,m++,k()}),c.getRecord(function(a,b){l.encounters=b,m++,k()}),d.getRecord(function(a,b){l.immunizations=b,m++,k()}),e.getRecord(function(a,b){l.medications=b,m++,k()}),f.getRecord(function(a,b){l.procedures=b,m++,k()}),g.getRecord(function(a,b){l.results=b,m++,k()}),h.getRecord(function(a,b){l.social=b,m++,k()}),i.getRecord(function(a,b){l.vitals=b,m++,k()})}}]),angular.module("phrPrototypeApp").service("allergies",function(){var a=function(a){var b=[{identifiers:[{identifier:"36e3e930-7b14-11db-9fe1-0800200c9a66"}],date_time:{point:{date:"2007-05-10T00:00:00Z",precision:"day"}},observation:{identifiers:[{identifier:"4adc1020-7b14-11db-9fe1-0800200c9a66"}],allergen:{name:"ALLERGENIC EXTRACT, PENICILLIN"},intolerance:{name:"Propensity to adverse reactions to drug",code:"419511003",code_system_name:"SNOMED CT"},date_time:{low:{date:"2007-05-01T00:00:00Z",precision:"day"}},status:{name:"Active",code:"73425007",code_system_name:"SNOMED CT"},reactions:[{severity:{interpretation:{code_system_name:"Observation Interpretation",code:"S",name:"Suceptible"},code:{code_system_name:"SNOMED CT",code:"255604002",name:"Mild"}},reaction:{code_system_name:"SNOMED CT",code:"255604002",name:"Hives"},date_time:{high:{precision:"second",date:"2009-02-27T13:00:00Z"},low:{precision:"day",date:"2007-05-01T00:00:00Z"}}}],severity:{code:{name:"Moderate to severe",code:"371924009",code_system_name:"SNOMED CT"},interpretation:{name:"Normal",code:"N",code_system_name:"Observation Interpretation"}}}}];a(null,b)};this.getPartialRecord=a;var b={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"I also have a hard time breathing, I should make sure my Doctor knows.",date:"2014-08-01T00:12:00Z",starred:!0},{comment:"Remember Macrolides are a good alternative.",date:"2014-08-18T00:08:00Z",starred:!1}]},c=function(a){a(null,b)};this.getRecordMeta=c;var d=function(a){var c={identifiers:[{identifier:"36e3e930-7b14-11db-9fe1-0800200c9a66"}],date_time:{point:{date:"2007-05-10T00:00:00Z",precision:"day"}},observation:{identifiers:[{identifier:"4adc1020-7b14-11db-9fe1-0800200c9a66"}],allergen:{name:"ALLERGENIC EXTRACT, PENICILLIN",code:"314422",code_system_name:"RXNORM"},intolerance:{name:"Propensity to adverse reactions to drug",code:"419511003",code_system_name:"SNOMED CT"},date_time:{low:{date:"2007-05-01T00:00:00Z",precision:"day"}},status:{name:"Inactive",code:"73425007",code_system_name:"SNOMED CT"},reactions:[{date_time:{low:{date:"2007-05-01T00:00:00Z",precision:"day"},high:{date:"2009-02-27T13:00:00Z",precision:"second"}},reaction:{name:"Nausea",code:"422587007",code_system_name:"SNOMED CT"},severity:{code:{name:"Mild",code:"255604002",code_system_name:"SNOMED CT"},interpretation:{name:"Suceptible",code:"S",code_system_name:"Observation Interpretation"}}}],severity:{code:{name:"Moderate to severe",code:"371924009",code_system_name:"SNOMED CT"},interpretation:{name:"Normal",code:"N",code_system_name:"Observation Interpretation"}}}},d=[{metadata:b,data:c}];a(null,d)};this.getRecord=d;var e=function(a,b){console.log(a),b(null)};this.saveEntry=e;var f=function(b){a(function(a,c){d(function(a,d){var e=[{match:"partial",percent:75,subelements:{observation:{reactions:[{match:"new",percent:0,src_id:"0",dest_id:"0",dest:"dest"}]}},diff:{observation:{status:"diff",reactions:"diff"}},srcMatch:d[0],newMatch:c[0]}];b(null,e)})})};this.getPartialMatch=f}),angular.module("phrPrototypeApp").service("vitals",function(){var a={identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Height",code:"8302-2",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2012-09-07T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:66,unit:"[in_i]"},b=[{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"I'm getting kinda heavy, I need to exercise more.",date:"2005-05-01T00:12:00Z",starred:!0}]}],c=[{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Height",code:"8302-2",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2012-09-07T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:68,unit:"[in_i]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Intravascular Systolic",code:"8480-6",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-05-07T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:124,unit:"mm[Hg]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Intravascular Systolic",code:"8480-6",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-06-14T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:130,unit:"mm[Hg]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Intravascular Systolic",code:"8480-6",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-09-01T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:115,unit:"mm[Hg]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Intravascular Diastolic",code:"8480-6",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-05-07T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:80,unit:"mm[Hg]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Intravascular Diastolic",code:"8480-6",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-06-14T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:82,unit:"mm[Hg]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Intravascular Diastolic",code:"8480-6",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-09-01T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:76,unit:"mm[Hg]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Patient Body Weight - Measured",code:"3141-9",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-10-08T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:140,unit:"[lb_av]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Patient Body Weight - Measured",code:"3141-9",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-10-12T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:142,unit:"[lb_av]"},{identifiers:[{identifier:"c6f88321-67ad-11db-bd13-0800200c9a66"}],vital:{name:"Patient Body Weight - Measured",code:"3141-9",code_system_name:"LOINC"},status:"completed",date_time:{point:{date:"2014-10-16T00:00:00Z",precision:"day"}},interpretations:["Normal"],value:146,unit:"[lb_av]"}];this.getRecord=function(a){var d=[];_.each(c,function(a,c){var e={metadata:angular.copy(b[c]),data:a};d.push(e)}),a(null,d)},this.getPartialRecord=function(b){var c=[{metadata:"",data:a}];b(null,c)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d,this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{},diff:{value:"diff"},srcMatch:{metadata:b,data:c[0]},newMatch:a}];d(null,e)}}),angular.module("phrPrototypeApp").directive("d3template",["$window","$timeout","d3Service",function(a,b,c){return{restrict:"A",scope:{data:"="},link:function(d,e){c.d3().then(function(c){var f,g={top:0,right:20,bottom:28,left:20},h=300-g.left-g.right,i=200-g.top-g.bottom,j=c.select(e[0]).append("svg").attr("class","chart").attr("width",h+g.left+g.right).attr("height",i+g.top+g.bottom).append("g").attr("transform","translate("+g.left+","+g.top+")");a.onresize=function(){d.$apply()},d.$watch(function(){return angular.element(a)[0].innerWidth},function(){d.render(d.data)}),d.$watch("data",function(a){d.render(a)},!0),d.render=function(){j.selectAll("*").remove(),f&&clearTimeout(f),f=b(function(){c.select(e[0]).node().offsetWidth>0&&(h=c.select(e[0]).node().offsetWidth-g.left-g.right,i=c.select(e[0]).node().offsetHeight-g.top-g.bottom,j.attr("width",h+g.left+g.right).attr("height",i+g.top+g.bottom)),j.append("rect").attr("width",h).attr("height",i).attr("fill","black")},100)}})}}}]).directive("measurements",["$window",function(a){return{template:'<svg width="1000"></svg>',restrict:"EA",link:function(b,c,d){function e(){r=g.time.scale().domain([g.min(m),g.max(m)]).range([w-2,h.clientWidth-w-2]),s=g.scale.linear().domain([g.min(n)-.1*g.min(n),g.max(n)+.1*g.max(n)]).range([h.clientHeight-w,0]),t=g.svg.axis().scale(r).orient("bottom").tickFormat(g.time.format("%m/%d")).outerTickSize([2]).tickValues([g.min(m),g.max(m)]),u=g.svg.axis().scale(s).orient("left").ticks(4).outerTickSize([2]),v=g.svg.line().x(function(a){return r(a.date)}).y(function(a){return s(a.value)}).interpolate("basis")}function f(){e(),i.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+(p-w+10)+")").call(t),i.append("svg:g").attr("class","y axis").attr("transform","translate("+w+",10)").call(u),k.length>0&&i.append("svg:path").attr({d:v(k),stroke:"#6AA6FF","stroke-width":2,fill:"none","class":x}),l.length>0&&i.append("svg:path").attr({d:v(l),stroke:"#6AA6FF","stroke-width":2,fill:"none","class":x})}var g=a.d3,h=c.find("svg")[0],i=g.select(h),j=b.entries.vitals,k=[],l=[],m=[],n=[],o=1e3,p=200;d.svgWidth&&(o=d.svgWidth),d.svgHeight&&(o=d.svgHeight);var q=g.time.format("%Y-%m-%dT%H:%M:%SZ");i.attr("height",p),i.attr("width",o),_.each(j,function(a){var b={};"weight"===d.graphType&&"Patient Body Weight - Measured"===a.data.vital.name&&(b.value=a.data.value,b.unit=a.data.unit,b.date=q.parse(a.data.date_time.point.date),k.push(b),m.push(b.date),n.push(b.value)),"bloodPressure"===d.graphType&&("Intravascular Diastolic"===a.data.vital.name&&(b.value=a.data.value,b.unit=a.data.unit,b.date=q.parse(a.data.date_time.point.date),k.push(b),m.push(b.date),n.push(b.value)),"Intravascular Systolic"===a.data.vital.name&&(b.value=a.data.value,b.unit=a.data.unit,b.date=q.parse(a.data.date_time.point.date),l.push(b),m.push(b.date),n.push(b.value)))});var r,s,t,u,v,w=30,x="path";f()}}}]).directive("linechart",["$window","$timeout","d3Service",function(a,b,c){return{restrict:"A",scope:{data:"="},link:function(d,e,f){c.d3().then(function(c){var g,h={top:0,right:20,bottom:28,left:20},i=1e3-h.left-h.right,j=250-h.top-h.bottom,k=c.select(e[0]).append("svg").attr("class","chart").attr("width",i+h.left+h.right).attr("height",j+h.top+h.bottom).append("g").attr("transform","translate("+h.left+","+h.top+")");a.onresize=function(){d.$apply()},d.$watch(function(){return angular.element(a)[0].innerWidth},function(){d.render(d.data)}),d.$on("tabchange",function(){d.render(d.data)}),d.$watch("data",function(a){d.render(a)},!0),d.render=function(a){k.selectAll("*").remove(),g&&clearTimeout(g),g=b(function(){function b(){q=c.time.scale().domain([c.min(m),c.max(m)]).nice(c.time.week).range([h.left,i-h.right]),r=c.scale.linear().domain([c.min(n)-.1*c.min(n),c.max(n)+.1*c.max(n)]).range([j-h.top,h.bottom]),s=c.svg.axis().scale(q).orient("bottom").tickFormat(c.time.format("%m/%d")).outerTickSize([2]).tickValues(m),t=c.svg.axis().scale(r).orient("left").ticks(4).outerTickSize([2]),u=c.svg.line().x(function(a){return q(a.date)}).y(function(a){return r(a.value)}).interpolate("cardinal").tension(.5)}function d(){b(),k.append("svg:g").attr("class","x-axis").attr("transform","translate(0,"+(j-h.top)+")").call(s),k.append("svg:g").attr("class","y-axis").attr("transform","translate("+h.right+",2)").call(t);var a=c.select("body").append("div").attr("id","cluster_tooltip").style("max-width","300px").style("padding","10px").style("background-color","rgba(255, 255, 255, 0.7)").style("border-radius","10px").style("box-shadow","4px 4px 10px rgba(0, 0, 0, 0.4)").style("position","absolute").style("z-index","10").style("visibility","hidden"),d=function(b){k.selectAll("#tipline").remove();var d=parseFloat(c.select(this).attr("cx")),e=parseFloat(c.select(this).attr("cy")),f=[[[d,j],[d,e+5]],[[h.left,e],[d-5,e]]];k.append("g").attr("id","tipline").selectAll(".line-to-axis").data(f).enter().append("path").attr("d",c.svg.line().interpolate("linear")).attr("stroke","#444").attr("stroke-width",1).style("stroke-dasharray","4,2");var g=b.value;return a.html(g),a.style("visibility","visible")
},e=function(){return a.style("top",c.event.pageY-10+"px").style("left",c.event.pageX+10+"px")},f=function(){return a.style("visibility","hidden")};g.length>0&&(k.append("svg:path").attr({d:u(g),stroke:"#6AA6FF","stroke-width":2,fill:"none","class":v}),k.selectAll("dot").data(g).enter().append("circle").attr("r",4.5).attr("cx",function(a){return q(a.date)}).attr("cy",function(a){return r(a.value)}).on("mouseover",d).on("mousemove",e).on("mouseout",f),k.selectAll("xtick").data(g).enter().append("rect").attr("width",2).attr("height",5).attr("x",function(a){return q(a.date)}).attr("y",j),k.selectAll("ytick").data(o).enter().append("rect").attr("width",5).attr("height",2).attr("x",h.left-5).attr("y",function(a){return r(a)})),l.length>0&&(k.append("svg:path").attr({d:u(l),stroke:"#6AA6FF","stroke-width":2,fill:"none","class":v}),k.selectAll("dot").data(l).enter().append("circle").attr("r",4.5).attr("cx",function(a){return q(a.date)}).attr("cy",function(a){return r(a.value)}).on("mouseover",d).on("mousemove",e).on("mouseout",f)),k.selectAll("circle").style("fill","#fff").style("stroke","#000")}c.select(e[0]).node().offsetWidth>0&&(i=c.select(e[0]).node().offsetWidth-h.left-h.right,j=c.select(e[0]).node().offsetHeight-h.top-h.bottom,k.attr("width",i+h.left+h.right).attr("height",j+h.top+h.bottom));var g=[],l=[],m=[],n=[],o=[],p=c.time.format("%Y-%m-%dT%H:%M:%SZ");_.each(a,function(a){var b={};"weight"===f.graphType&&("Patient Body Weight - Measured"===a.data.vital.name&&(b.value=a.data.value,b.unit=a.data.unit,b.date=p.parse(a.data.date_time.point.date),g.push(b),m.push(b.date),n.push(b.value)),o=[130,140,150,160]),"bloodPressure"===f.graphType&&("Intravascular Diastolic"===a.data.vital.name&&(b.value=a.data.value,b.unit=a.data.unit,b.date=p.parse(a.data.date_time.point.date),g.push(b),m.push(b.date),n.push(b.value)),"Intravascular Systolic"===a.data.vital.name&&(b.value=a.data.value,b.unit=a.data.unit,b.date=p.parse(a.data.date_time.point.date),l.push(b),m.push(b.date),n.push(b.value)),o=[80,100,120,140])});var q,r,s,t,u,v="path";d()},100)}})}}}]),angular.module("phrPrototypeApp").service("format",function(){this.formatDate=function(a){var b;return"year"===a.precision&&(b=moment.utc(a.date).format("YYYY"),a.displayDate=b),"month"===a.precision&&(b=moment.utc(a.date).format("MMM, YYYY"),a.displayDate=b),"day"===a.precision&&(b=moment.utc(a.date).format("MMM D, YYYY"),a.displayDate=b),"hour"===a.precision&&(b=moment.utc(a.date).format("MMM D, YYYY h:mm a"),a.displayDate=b),"minute"===a.precision&&(b=moment.utc(a.date).format("MMM D, YYYY h:mm a"),a.displayDate=b),"second"===a.precision&&(b=moment.utc(a.date).format("MMM D, YYYY h:mm a"),a.displayDate=b),"subsecond"===a.precision&&(b=moment.utc(a.date).format("MMM D, YYYY h:mm a"),a.displayDate=b),b},this.outputDate=function(a){return a?a.point?a.point.displayDate:a.low&&a.high?a.low.displayDate+" - "+a.high.displayDate:a.high?"... - "+a.high.displayDate:a.low?a.low.displayDate+" - Present":a.center?a.center.displayDate:"Date Not Reported":"Date Not Reported"},this.plotDate=function(a){return a?a.point?a.point.date:a.low&&a.high?a.low.date:a.high?a.high.date:a.low?a.low.date:a.center?a.center.date:null:null},this.formatAddress=function(a){var b=[];if(a.street_lines.length>0)for(var c in a.street_lines)b.push(a.street_lines[c]);var d="",e="";return a.city&&(e=d=d.length>0?d+" "+a.city+",":a.city+","),a.state&&(e=d=d.length>0?d+" "+a.state:a.state),a.zip&&(e=d=d.length>0?d+" "+a.zip:a.zip),d.length>0&&b.push(d),a.displayAddress=b,a},this.formatName=function(a){var b="";return a.last&&a.first?b=a.first+" "+a.last:a.first?b=a.first:a.last&&(b=a.last),a.displayName=b,a},this.formatQuantity=function(a){var b="",c="";return a.unit&&(b="[in_i]"===a.unit?"inches":"[lb_av]"===a.unit?"lbs":"mm[Hg]"===a.unit?"mm":a.unit),a.value&&(c=a.value),a.unit&&a.value&&(c=c+" "+b),a.displayQuantity=c,a},this.formatInterval=function(a){var b="";return a.period&&(b=a.period.value+" "+a.period.unit),a.displayInterval=b,b}}),angular.module("phrPrototypeApp").controller("RecordEncountersCtrl",["$scope","$location","$anchorScroll","encounters","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time)),a.data.findings&&_.each(a.data.findings,function(a){a.date_time&&(_.each(a.date_time,function(a){e.formatDate(a)}),a.date_time.displayDate=e.outputDate(a.date_time))})})}function i(){_.each(a.masterEntries,function(a){_.each(a.data.locations,function(a){_.each(a.address,function(a){e.formatAddress(a)})})})}a.entryType="encounters",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").service("encounters",function(){var a={encounter:{name:"Office outpatient visit 15 minutes",code:"99213",code_system_name:"CPT",translations:[{name:"Ambulatory",code:"AMB",code_system_name:"HL7ActCode"}]},identifiers:[{identifier:"2a620155-9d11-439e-92b3-5d9815ff4de8"}],date_time:{point:{date:"2009-02-27T13:00:00Z",precision:"second"}},performers:[{identifiers:[{identifier:"PseduoMD-3"}],code:[{name:"General Physician",code:"59058001",code_system_name:"SNOMED CT"}]}],locations:[{name:"Community Urgent Care Center",location_type:{name:"Urgent Care Center",code:"1160-1",code_system_name:"HealthcareServiceLocation"},address:[{street_lines:["17 Daws Rd."],city:"Blue Bell",state:"MA",zip:"02368",country:"US"}]}],findings:[{identifiers:[{identifier:"db734647-fc99-424c-a864-7e3cda82e703",extension:"45665"}],value:{name:"Diarrea",code:"12345",code_system_name:"SNOMED CT"},date_time:{low:{date:"2007-01-03T00:00:00Z",precision:"day"}}}]},b={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"It's not in the entry, but this was with Dr. James Henderson",date:"2009-03-04T00:12:00Z",starred:!1},{comment:"Remember to schedule my follow up appointment.",date:"2009-03-04T00:08:00Z",starred:!0}]},c={encounter:{name:"Office outpatient visit 15 minutes",code:"99213",code_system_name:"CPT",translations:[{name:"Ambulatory",code:"AMB",code_system_name:"HL7ActCode"}]},identifiers:[{identifier:"2a620155-9d11-439e-92b3-5d9815ff4de8"}],date_time:{point:{date:"2009-02-27T13:00:00Z",precision:"second"}},performers:[{identifiers:[{identifier:"PseduoMD-3"}],code:[{name:"General Physician",code:"59058001",code_system_name:"SNOMED CT"}]}],locations:[{name:"Community Urgent Care Center",location_type:{name:"Urgent Care Center",code:"1160-1",code_system_name:"HealthcareServiceLocation"},address:[{street_lines:["17 Daws Rd."],city:"Blue Bell",state:"MA",zip:"02368",country:"US"}]}]};this.getRecord=function(a){var d=[{metadata:b,data:c}];a(null,d)},this.getPartialRecord=function(b){var c=[{metadata:"",data:a}];b(null,c)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d,this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{observation:{reactions:[{match:"new",percent:0,src_id:"0",dest_id:"0",dest:"dest"}]}},diff:{findings:"new"},srcMatch:{metadata:b,data:c},newMatch:a}];d(null,e)}}),angular.module("phrPrototypeApp").directive("recordNavigation",["$window",function(){return{templateUrl:"views/templates/recordnavigation.html",restrict:"EA",link:function(a,b){_.isUndefined(a.entryType)?b.find("#navall").addClass("active"):b.find("#nav"+a.entryType).addClass("active")}}}]),angular.module("phrPrototypeApp").controller("RecordImmunizationsCtrl",["$scope","$location","$anchorScroll","immunizations","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}function i(){_.each(a.masterEntries,function(a){_.each(a.data.performer,function(){_.each(a.data.performer.name,function(a){e.formatName(a)}),_.each(a.data.performer.address,function(a){e.formatAddress(a)})}),e.formatQuantity(a.data.administration.dose)})}a.entryType="immunizations",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").controller("BillingClaimsCtrl",["$scope","$location","$anchorScroll","claims","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}function i(){_.each(a.masterEntries,function(a){_.each(a.data.locations,function(a){_.each(a.address,function(a){e.formatAddress(a)})})})}a.entryType="claims",a.masterEntries=[],a.entries=[],a.updateDate=null,a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").service("claims",function(){var a={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"I should check my bank statement, make sure they didn't overcharge me.",date:"2007-06-01T00:12:00Z",starred:!0}]},b=[{payer:["medicare"],number:"1234567890000",date_time:{low:{date:"2012-10-18T00:00:00Z",precision:"day"}},lines:[{line:"1",date_time:{low:{date:"2012-10-18T00:00:00Z",precision:"day"},high:{date:"2012-10-18T00:00:00Z",precision:"day"}},procedure:{code:"98941",description:"Chiropractic Manipulative Treatment (Cmt); Spinal, Three To Four Regions"},quantity:1,modifiers:[{code:"98941",description:"Chiropractic Manipulative Treatment (Cmt); Spinal, Three To Four Regions"}],charges:{price_billed:"$60.00",insurance_paid:"$34.00"},place:{code:"11",name:"Office"},type:{code:"1",name:"Medical Care"},rendering_provider:{number:"0000001",npi:"123456789"}}],charges:{price_billed:"$60.00",provider_paid:"$27.20",patient_responsibility:"$6.80"},type:["medicare PartB"],diagnoses:[{code:"3534"},{code:"7393"},{code:"7392"},{code:"3533"}],provider:{name:"No Information Available"}}],c=function(b){b(null,a)};this.getRecordMeta=c,this.getRecord=function(c){var d=[];_.each(b,function(b){var c={metadata:angular.copy(a),data:b};d.push(c)}),c(null,d)}}),angular.module("phrPrototypeApp").controller("BillingInsuranceCtrl",["$scope","$location","$anchorScroll","$window","insurance","format",function(a,b,c,d,e,f){function g(){a.updateDate="12/1/2014"}function h(b){e.getRecord(function(c,d){a.masterEntries=d,b()})}function i(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){f.formatDate(a)}),a.data.date_time.displayDate=f.outputDate(a.data.date_time),a.data.date_time.plotDate=f.plotDate(a.data.date_time)),a.findings&&_.each(a.data.findings,function(a){a.date_time&&(_.each(a.date_time,function(a){f.formatDate(a)}),a.date_time.displayDate=f.outputDate(a.date_time))})})}function j(){_.each(a.masterEntries,function(a){_.each(a.data.locations,function(a){_.each(a.address,function(a){f.formatAddress(a)})})})}a.entryType="insurance",a.masterEntries=[],a.entries=[],a.updateDate=null,a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){h(function(){g(),i(),j(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").service("insurance",function(){var a=[{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[]},{attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"This insurance is no longer valid since I don't work for the state anymore.",date:"2014-05-03T00:12:00Z",starred:!0}]}],b=[{plan_id:"H9999/9999",name:"Medicare",type:["medicare","A Medicare Plan Plus (HMO)","3 - Coordinated Care Plan (HMO, PPO, PSO, SNP)"]},{plan_id:"S9999/000",name:"Blue Cross/Blue Shield",type:["BCBS","Blue Cross Blue Shield Silver (PPO)","9 - Silver Plan"]},{name:"STATE HEALTH BENEFITS PROGRAM",type:["employer subsidy"],date_time:{low:{date:"2011-01-01T00:00:00Z",precision:"day"},high:{date:"2011-12-31T00:00:00Z",precision:"day"}}}],c=function(b){b(null,a)};this.getRecordMeta=c,this.getRecord=function(c){var d=[];_.each(b,function(b,c){var e={metadata:angular.copy(a[c]),data:b};d.push(e)}),c(null,d)}}),angular.module("phrPrototypeApp").directive("billingnavigation",function(){return{template:'<div class="btn-group-vertical col-sm-12 sidebar-control"><a href="#/billing/insurance" class="btn btn-info btn-block" ng-class="{active: entryInsurance}">Insurance</a><a href="#/billing/claims" class="btn btn-info btn-block" ng-class="{active: entryClaims}">Claims</a></div>',restrict:"EA",link:function(a){a.entryInsurance=!1,a.entryClaims=!1,"insurance"===a.entryType?a.entryInsurance=!0:"claims"===a.entryType&&(a.entryClaims=!0)}}}),angular.module("phrPrototypeApp").service("immunizations",function(){var a={date_time:{point:{date:"1999-11-01T00:00:00Z",precision:"month"}},identifiers:[{identifier:"e6f1ba43-c0ed-4b9b-9f12-f435d8ad8f92"}],status:"complete",product:{product:{name:"Influenza virus vaccine"}},administration:{route:{name:"Intramuscular injection"},dose:{value:50,unit:"mcg"}},performer:{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.456",extension:"2981824"}],name:[{last:"Assigned",first:"Amanda"}],address:[{street_lines:["1021 Health Drive"],city:"Ann Arbor",state:"MI",zip:"99099",country:"US"}],organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1394"}],name:["Good Health Clinic"]}]},instructions:{code:{name:"immunization education",code:"171044003",code_system_name:"SNOMED CT"},free_text:"Possible flu-like symptoms for three days."}},b={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"Usually a good idea to mark on my calendar when this is for next year.",date:"2014-11-04T00:12:00Z",starred:!0}]},c={date_time:{point:{date:"1999-11-01T00:00:00Z",precision:"month"}},identifiers:[{identifier:"e6f1ba43-c0ed-4b9b-9f12-f435d8ad8f92"}],status:"complete",product:{product:{name:"Influenza virus vaccine",code:"88",code_system_name:"CVX",translations:[{name:"Influenza, seasonal, injectable",code:"141",code_system_name:"CVX"}]},lot_number:"1",manufacturer:"Health LS - Immuno Inc."},administration:{route:{name:"Intramuscular injection",code:"C28161",code_system_name:"Medication Route FDA"},dose:{value:50,unit:"mcg"}},performer:{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.456",extension:"2981824"}],name:[{last:"Assigned",first:"Amanda"}],address:[{street_lines:["1021 Health Drive"],city:"Ann Arbor",state:"MI",zip:"99099",country:"US"}],organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1394"}],name:["Good Health Clinic"]}]},instructions:{code:{name:"immunization education",code:"171044003",code_system_name:"SNOMED CT"},free_text:"Possible flu-like symptoms for three days."}};this.getRecord=function(a){var d=[{metadata:b,data:c}];a(null,d)},this.getPartialRecord=function(b){var c=[{metadata:"",data:a}];b(null,c)},this.saveEntry=function(a){console.log(entry),a(null)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d,this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{},diff:{product:"diff",administration:"diff"},srcMatch:{metadata:b,data:c},newMatch:a}];d(null,e)}}),angular.module("phrPrototypeApp").service("medications",function(){var a={date_time:{low:{date:"2006-12-31T00:00:00Z",precision:"day"},high:{date:"2012-04-30T00:00:00Z",precision:"day"}},identifiers:[{identifier:"cdbd33f0-6cde-11db-9fe1-0800200c9a66"}],status:"Completed",sig:"Proventil HFA",product:{identifiers:[{identifier:"2a620155-9d11-439e-92b3-5d9815ff4ee8"}],unencoded_name:"Proventil HFA",product:{name:"Proventil HFA",code:"219483",translations:[{name:"Proventil 0.09 MG/ACTUAT inhalant solution",code:"573621",code_system_name:"RXNORM"}],code_system_name:"RXNORM"},manufacturer:"Medication Factory Inc."},supply:{date_time:{low:{date:"2007-01-03T00:00:00Z",precision:"day"}},repeatNumber:"1",quantity:"75",author:{identifiers:[{identifier:"2a620155-9d11-439e-92b3-5d9815fe4de8"}],name:{prefix:"Dr.",last:"Seven",first:"Henry"}}},administration:{route:{name:"RESPIRATORY",code:"C38216",code_system_name:"Medication Route FDA"},form:{name:"INHALANT",code:"C42944",code_system_name:"Medication Route FDA"},dose:{value:1,unit:"mg/actuat"},rate:{value:90,unit:"ml/min"},interval:{period:{value:6,unit:"h"},frequency:!0}},performer:{organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1393"}],name:["Community Health and Hospitals"]}]},drug_vehicle:{name:"Aerosol",code:"324049",code_system_name:"RXNORM"},precondition:{code:{code:"ASSERTION",code_system_name:"HL7ActCode"},value:{name:"Wheezing",code:"56018004",code_system_name:"SNOMED CT"}},indication:{identifiers:[{identifier:"db734647-fc99-424c-a864-7e3cda82e703",extension:"45665"}],code:{name:"Finding",code:"404684003",code_system_name:"SNOMED CT"},date_time:{low:{date:"2007-01-03T00:00:00Z",precision:"day"}},value:{name:"Pneumonia",code:"233604007",code_system_name:"SNOMED CT"}},dispense:{identifiers:[{identifier:"1.2.3.4.56789.1",extension:"cb734647-fc99-424c-a864-7e3cda82e704"}],performer:{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.456",extension:"2981823"}],address:[{street_lines:["1001 Village Avenue"],city:"Portland",state:"OR",zip:"99123",country:"US"}],organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1393"}],name:["Community Health and Hospitals"]}]}}},b={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"I took this to treat the Pneumonia I had.",date:"2009-01-30T00:12:00Z",starred:!1}]},c={date_time:{low:{date:"2008-01-03T00:00:00Z",precision:"day"},high:{date:"2008-01-21T00:00:00Z",precision:"day"}},identifiers:[{identifier:"cdbd33f0-6cde-11db-9fe1-0800200c9a66"}],sig:"Proventil HFA",product:{identifiers:[{identifier:"2a620155-9d11-439e-92b3-5d9815ff4ee8"}],unencoded_name:"Proventil HFA",product:{name:"Proventil HFA",code:"219483",translations:[{name:"Proventil 0.09 MG/ACTUAT inhalant solution",code:"573621",code_system_name:"RXNORM"}],code_system_name:"RXNORM"},manufacturer:"Medication Factory Inc."},supply:{date_time:{low:{date:"2007-01-03T00:00:00Z",precision:"day"}},repeatNumber:"1",quantity:"75",author:{identifiers:[{identifier:"2a620155-9d11-439e-92b3-5d9815fe4de8"}],name:{prefix:"Dr.",last:"Seven",first:"Henry"}}},administration:{route:{name:"RESPIRATORY (INHALATION)",code:"C38216",code_system_name:"Medication Route FDA"},dose:{value:1,unit:"mg/actuat"},form1:{name:"SOLUTION",code:"C42986",code_system_name:"Medication Route FDA"},form:{name:"",code:"",code_system_name:""},rate:{value:90,unit:"ml/min"},interval:{period:{value:6,unit:"h"},frequency:!0}},performer:{organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1393"}],name:["Community Health and Hospitals"]}]},drug_vehicle:{name:"Aerosol",code:"324049",code_system_name:"RXNORM"},precondition:{code:{code:"ASSERTION",code_system_name:"HL7ActCode"},value:{name:"Wheezing",code:"56018004",code_system_name:"SNOMED CT"}},indication:{identifiers:[{identifier:"db734647-fc99-424c-a864-7e3cda82e703",extension:"45665"}],code:{name:"Finding",code:"404684003",code_system_name:"SNOMED CT"},date_time:{low:{date:"2007-01-03T00:00:00Z",precision:"day"}},value:{name:"Pneumonia",code:"233604007",code_system_name:"SNOMED CT"}},dispense:{identifiers:[{identifier:"1.2.3.4.56789.1",extension:"cb734647-fc99-424c-a864-7e3cda82e704"}],performer:{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.456",extension:"2981823"}],address:[{street_lines:["1001 Village Avenue"],city:"Portland",state:"OR",zip:"99123",country:"US"}],organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1393"}],name:["Community Health and Hospitals"]}]}}};this.getRecord=function(a){var d=[{metadata:b,data:c}];a(null,d)},this.getPartialRecord=function(b){var c=[{metadata:"",data:a}];b(null,c)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d,this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{},diff:{date_time:"diff",status:"new",administration:{route:"diff",form:"new"}},srcMatch:{metadata:b,data:c},newMatch:a}];d(null,e)}}),angular.module("phrPrototypeApp").controller("RecordMedicationsCtrl",["$scope","$location","$anchorScroll","medications","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}function i(){_.each(a.masterEntries,function(a){_.each(a.data.supply.date_time,function(a){e.formatDate(a)}),a.data.supply.date_time.displayDate=e.outputDate(a.data.supply.date_time),e.formatName(a.data.supply.author.name),e.formatInterval(a.data.administration.interval),e.formatQuantity(a.data.administration.dose),e.formatQuantity(a.data.administration.rate)})}a.entryType="medications",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordConditionsCtrl",["$scope","$location","$anchorScroll","conditions","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}function i(){_.each(a.masterEntries,function(a){a.data.problem.date_time&&(_.each(a.data.problem.date_time,function(a){e.formatDate(a)}),a.data.problem.date_time.displayDate=e.outputDate(a.data.problem.date_time))})}a.entryType="conditions",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").service("conditions",function(){var a={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"I've had this a few times over the course of my life",date:"2009-01-30T08:12:00Z",starred:!1}]},b={date_time:{low:{date:"2008-01-03T00:00:00Z",precision:"day"},high:{date:"2008-01-03T00:00:00Z",precision:"day"}},identifiers:[{identifier:"ab1791b0-5c71-11db-b0de-0800200c9a66"}],negation_indicator:!1,problem:{code:{name:"Pneumonia",code:"233604007",code_system_name:"SNOMED CT"},date_time:{low:{date:"2008-01-03T00:00:00Z",precision:"day"},high:{date:"2008-01-03T00:00:00Z",precision:"day"}}},onset_age:"57",onset_age_unit:"Year",status:{name:"Resolved",date_time:{low:{date:"2008-01-03T00:00:00Z",precision:"day"},high:{date:"2009-02-27T13:00:00Z",precision:"second"}}},patient_status:"Alive and well",source_list_identifiers:[{identifier:"ec8a6ff8-ed4b-4f7e-82c3-e98e58b45de7"}]},c={date_time:{low:{date:"2008-01-03T00:00:00Z",precision:"day"},high:{date:"2008-01-03T00:00:00Z",precision:"day"}},identifiers:[{identifier:"ab1791b0-5c71-11db-b0de-0800200c9a66"}],negation_indicator:!1,problem:{code:{name:"Pneumonia"}},onset_age:"57",onset_age_unit:"Year",status:{name:"Resolved",date_time:{low:{date:"2008-01-03T00:00:00Z",precision:"day"},high:{date:"2009-02-27T13:00:00Z",precision:"second"}}},patient_status:"Alive and well",source_list_identifiers:[{identifier:"ec8a6ff8-ed4b-4f7e-82c3-e98e58b45de7"}]};this.getRecord=function(c){var d=[{metadata:a,data:b}];c(null,d)},this.getPartialRecord=function(a){var b=[{metadata:"",data:c}];a(null,b)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d,this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{},diff:{problem:"diff"},srcMatch:{metadata:a,data:b},newMatch:c}];d(null,e)}}),angular.module("phrPrototypeApp").service("procedures",function(){var a={procedure:{name:"Colonoscopy",code:"73761001",code_system_name:"SNOMED CT"},identifiers:[{identifier:"d68b7e32-7810-4f5b-9cc2-acd54b0fd85d"}],status:"Completed",date_time:{point:{date:"2012-05-12T00:00:00Z",precision:"day"}},body_sites:[{name:"colon",code:"appropriate_code",code_system_name:"OID 2.16.840.1.113883.3.88.12.3221.8.9"}],specimen:{identifiers:[{identifier:"c2ee9ee9-ae31-4628-a919-fec1cbb58683"}],code:{name:"colonic polyp sample",code:"309226005",code_system_name:"SNOMED CT"}},performer:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.456",extension:"2981823"}],address:[{street_lines:["1002 Village Avenue"],city:"Portland",state:"OR",zip:"99123",country:"US"}],phone:[{number:"555-555-5000",type:"work place"}],organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1393"}],name:["Community Health and Hospitals"],address:[{street_lines:["1001 Village Avenue"],city:"Portland",state:"OR",zip:"99123",country:"US"}],phone:[{number:"555-555-5000",type:"work place"}]}]}],procedure_type:"procedure"},b={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"I don't recall having this done!  I should ask my doctor for more details.",date:"2005-05-01T00:12:00Z",starred:!0}]},c={procedure:{name:"Colonoscopy",code:"73761001",code_system_name:"SNOMED CT"},identifiers:[{identifier:"d68b7e32-7810-4f5b-9cc2-acd54b0fd85d"}],status:"Completed",date_time:{point:{date:"2012-05-12T00:00:00Z",precision:"day"}},body_sites:[{name:"colon",code:"appropriate_code",code_system_name:"OID 2.16.840.1.113883.3.88.12.3221.8.9"}],specimen:{identifiers:[{identifier:"c2ee9ee9-ae31-4628-a919-fec1cbb58683"}],code:{name:"colonic polyp sample",code:"309226005",code_system_name:"SNOMED CT"}},performer:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.456",extension:"2981823"}],address:[{street_lines:["1001 Village Avenue"],city:"Portland",state:"OR",zip:"99123",country:"US"}],phone:[{number:"555-555-5000",type:"work place"}],organization:[{identifiers:[{identifier:"2.16.840.1.113883.19.5.9999.1393"}],name:["Community Health and Hospitals"],address:[{street_lines:["1001 Village Avenue"],city:"Portland",state:"OR",zip:"99123",country:"US"}],phone:[{number:"555-555-5000",type:"work place"}]}]}],procedure_type:"procedure"};this.getRecord=function(a){var d=[{metadata:b,data:c}];a(null,d)},this.getPartialRecord=function(b){var c=[{metadata:"",data:a}];b(null,c)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d,this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{},diff:{performer:"diff"},srcMatch:{metadata:b,data:c},newMatch:a}];d(null,e)}}),angular.module("phrPrototypeApp").controller("RecordProceduresCtrl",["$scope","$location","$anchorScroll","procedures","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}function i(){_.each(a.masterEntries,function(a){_.each(a.data.performer,function(a){_.each(a.address,function(a){e.formatAddress(a)}),_.each(a.organization,function(a){_.each(a.address,function(a){e.formatAddress(a)})})})})}a.entryType="procedures",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordVitalsCtrl",["$scope","$location","$anchorScroll","vitals","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}function i(){_.each(a.masterEntries,function(a){e.formatQuantity(a.data)})}a.entryType="vitals",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").service("results",function(){var a={identifiers:[{identifier:"7d5a02b0-67a4-11db-bd13-0800200c9a66"}],result_set:{name:"CBC WO DIFFERENTIAL"},results:[{identifiers:[{identifier:"107c2dc0-67a5-11db-bd13-0800200c9a66"}],result:{name:"HGB",code:"30313-1",code_system_name:"LOINC"},date_time:{point:{date:"2000-03-23T14:30:00Z",precision:"minute"}},status:"completed",reference_range:{range:"M 13-18 g/dl; F 12-16 g/dl"},interpretations:["Normal"],value:13.2,unit:"g/dl"},{identifiers:[{identifier:"107c2dc0-67a5-11db-bd13-0800200c9a66"}],result:{name:"WBC",code:"33765-9",code_system_name:"LOINC"},date_time:{point:{date:"2000-03-23T14:30:00Z",precision:"minute"}},status:"completed",reference_range:{low:"4.3",high:"10.8",unit:"10+3/ul"},interpretations:["Normal"],value:6.7,unit:"10+3/ul"},{identifiers:[{identifier:"107c2dc0-67a5-11db-bd13-0800200c9a66"}],result:{name:"PLT",code:"26515-7",code_system_name:"LOINC"},date_time:{point:{date:"2000-03-23T14:30:00Z",precision:"minute"}},status:"completed",reference_range:{low:"150",high:"350",unit:"10+3/ul"},interpretations:["Low"],value:123,unit:"10+3/ul"}]},b={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"Doctor called, and said there was nothing to worry about here.",date:"2005-05-01T00:12:00Z",starred:!1}]},c={identifiers:[{identifier:"7d5a02b0-67a4-11db-bd13-0800200c9a66"}],result_set:{name:"CBC WO DIFFERENTIAL",code:"43789009",code_system_name:"SNOMED CT"},results:[{identifiers:[{identifier:"107c2dc0-67a5-11db-bd13-0800200c9a66"}],result:{name:"HGB",code:"30313-1",code_system_name:"LOINC"},date_time:{point:{date:"2000-03-23T14:30:00Z",precision:"minute"}},status:"completed",reference_range:{range:"M 13-18 g/dl; F 12-16 g/dl"},interpretations:["Normal"],value:13.2,unit:"g/dl"},{identifiers:[{identifier:"107c2dc0-67a5-11db-bd13-0800200c9a66"}],result:{name:"WBC",code:"33765-9",code_system_name:"LOINC"},date_time:{point:{date:"2000-03-23T14:30:00Z",precision:"minute"}},status:"completed",reference_range:{low:"4.3",high:"10.8",unit:"10+3/ul"},interpretations:["Normal"],value:6.7,unit:"10+3/ul"},{identifiers:[{identifier:"107c2dc0-67a5-11db-bd13-0800200c9a66"}],result:{name:"PLT",code:"26515-7",code_system_name:"LOINC"},date_time:{point:{date:"2000-03-23T14:30:00Z",precision:"minute"}},status:"completed",reference_range:{low:"150",high:"350",unit:"10+3/ul"},interpretations:["Low"],value:123,unit:"10+3/ul"}]};
this.getRecord=function(a){var d=[{metadata:b,data:c}];a(null,d)},this.getPartialRecord=function(b){var c=[{metadata:"",data:a}];b(null,c)},this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{},diff:{result_set:"diff",results:"new"},srcMatch:{metadata:b,data:c},newMatch:a}];d(null,e)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d}),angular.module("phrPrototypeApp").controller("RecordResultsCtrl",["$scope","$location","$anchorScroll","results","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){var b=[];a.data.date_time={},_.each(a.data.results,function(a){_.each(a.date_time,function(a,c){"displayDate"!==c&&(a.displayDate||e.formatDate(a),b.push(moment(a.date)))}),a.date_time.displayDate||(a.date_time.displayDate=e.outputDate(a.date_time))});var c=moment.min(b),d=moment.max(b);c.isSame(d,"day")&&(a.data.date_time.point={},a.data.date_time.point.date=c.toISOString(),a.data.date_time.point.precision="day"),_.each(a.data.date_time,function(a){a.displayDate=e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time)})}function i(){_.each(a.masterEntries,function(a){_.each(a.data.results,function(a){e.formatQuantity(a)})})}a.entryType="results",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordSocialCtrl",["$scope","$location","$anchorScroll","social","format",function(a,b,c,d,e){function f(){a.updateDate="12/1/2014"}function g(b){d.getRecord(function(c,d){a.masterEntries=d,b()})}function h(){_.each(a.masterEntries,function(a){a.data.date_time&&(_.each(a.data.date_time,function(a){e.formatDate(a)}),a.data.date_time.displayDate=e.outputDate(a.data.date_time),a.data.date_time.plotDate=e.plotDate(a.data.date_time))})}function i(){}a.entryType="social",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.closeAlert=function(){a.alertShow=!1},a.newComment={starred:!1},a.navClick=function(a){var d=b.hash();b.hash(a),c(),b.hash(d)},a.refresh=function(){g(function(){f(),h(),i(),a.entries=a.masterEntries})},a.refresh()}]),angular.module("phrPrototypeApp").service("social",function(){var a={date_time:{low:{date:"2005-04-30T00:00:00Z",precision:"day"},high:{date:"2012-02-27T13:00:00Z",precision:"second"}},identifiers:[{identifier:"2.16.840.1.113883.19",extension:"123456789"}],code:{name:"Smoking Status"},value:"Former smoker"},b={attribution:[{source:"blue-button.xml",status:"new",merged:"2007-05-01T00:00:00Z"}],comments:[{comment:"Been smoke free for two years!",date:"2014-04-01T00:12:00Z",starred:!1}]},c={date_time:{low:{date:"2005-05-01T00:00:00Z",precision:"day"},high:{date:"2009-02-27T13:00:00Z",precision:"second"}},identifiers:[{identifier:"2.16.840.1.113883.19",extension:"123456789"}],code:{name:"Smoking Status"},value:"Former smoker"};this.getRecord=function(a){var d=[{metadata:b,data:c}];a(null,d)},this.getPartialRecord=function(b){var c=[{metadata:"",data:a}];b(null,c)};var d=function(a,b){console.log(a),b(null)};this.saveEntry=d,this.getPartialMatch=function(d){var e=[{match:"partial",percent:75,subelements:{},diff:{date_time:"diff"},srcMatch:{metadata:b,data:c},newMatch:a}];d(null,e)}}),angular.module("phrPrototypeApp").directive("timelineIcon",function(){return{template:'<i class="fa fa-2x"></i>',restrict:"EA",link:function(a,b,c){var d=[{type:"allergies",icon:"fa-exclamation-triangle"},{type:"encounters",icon:"fa-stethoscope"},{type:"immunizations",icon:"fa-shield"},{type:"medications",icon:"fa-plus-circle"},{type:"conditions",icon:"fa-list"},{type:"procedures",icon:"fa-medkit"},{type:"vitals",icon:"fa-heart"},{type:"results",icon:"fa-flask"},{type:"social",icon:"fa-group"}],e=_.findWhere(d,{type:c.timelineIconType});b.children().addClass(e?e.icon:"fa-pencil"),b.children().attr("id","entry"+c.timelineIndex)}}}),angular.module("phrPrototypeApp").service("partial",function(){this.getPartialMatches=function(a,b){if("allergies"===a){var c=[{asdf:"asdf"}];b(null,c)}}}),angular.module("phrPrototypeApp").controller("RecordAllergiesReviewCtrl",["$scope","$location","allergies","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time)})}a.entryType="allergies",a.masterEntries=[],a.entries=[],a.updateDate=null,a.inactiveFlag=!1,a.partialEntries=[],a.alertShow=!0,a.match=[];var g={observation:{status:null,reactions:null}};a.selected=angular.copy(g),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data[d]=a.match[b].newMatch[d]:c===!1?(a.match[b].srcMatch.data[d]=a.match[b].origMatch[d],f()):_.isObject(c)&&_.each(c,function(c,d){c===!0?a.match[b].srcMatch.data.observation[d]=a.match[b].newMatch.observation[d]:c===!1&&(a.match[b].srcMatch.data.observation[d]=a.match[b].origMatch.observation[d])})})},a.clearAll=function(b){a.selected=angular.copy(g),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/allergies")})},a.refresh=function(){e(function(){f()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordDownloadCtrl",["$scope","$location",function(a,b){a.downloadClick=function(){b.path("/record")}}]),angular.module("phrPrototypeApp").controller("FilesUploadCtrl",["$scope","$location",function(a,b){a.uploadStep=0,a.incrementStep=function(){a.uploadStep++},a["return"]=function(){b.path("/files")}}]),angular.module("phrPrototypeApp").controller("RecordEncountersReviewCtrl",["$scope","$location","encounters","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){a.newMatch.date_time&&(_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),a.newMatch.date_time.plotDate=d.plotDate(a.newMatch.date_time)),a.newMatch.findings&&_.each(a.newMatch.findings,function(a){a.date_time&&(_.each(a.date_time,function(a){d.formatDate(a)}),a.date_time.displayDate=d.outputDate(a.date_time))}),a.srcMatch.data.date_time&&(_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time),a.srcMatch.data.date_time.plotDate=d.plotDate(a.srcMatch.data.date_time)),a.srcMatch.data.findings&&_.each(a.srcMatch.data.findings,function(a){a.date_time&&(_.each(a.date_time,function(a){d.formatDate(a)}),a.date_time.displayDate=d.outputDate(a.date_time))})})}a.entryType="encounters",a.masterEntries=[],a.entries=[],a.updateDate=null,a.inactiveFlag=!1,a.partialEntries=[],a.alertShow=!0,a.match=[];var g={findings:null};a.selected=angular.copy(g),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data[d]=a.match[b].newMatch[d]:c===!1?(a.match[b].srcMatch.data[d]=a.match[b].origMatch[d],f()):_.isObject(c)&&_.each(c,function(c,e){if(c===!0){var f=a.match[b].newMatch[d];f.dataIndex=e,a.match[b].srcMatch.data[d]||(a.match[b].srcMatch.data[d]=[]),a.match[b].srcMatch.data[d].push(f[e])}else c===!1&&a.match[b].srcMatch.data[d].splice(e)})})},a.clearAll=function(b){a.selected=angular.copy(g),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/encounters")})},a.refresh=function(){e(function(){f()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordImmunizationsReviewCtrl",["$scope","$location","immunizations","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time)})}function g(){_.each(a.match,function(a){_.each(a.srcMatch.data.performer,function(){_.each(a.srcMatch.data.performer.name,function(a){d.formatName(a)}),_.each(a.srcMatch.data.performer.address,function(a){d.formatAddress(a)})}),d.formatQuantity(a.srcMatch.data.administration.dose),_.each(a.newMatch.performer,function(){_.each(a.newMatch.performer.name,function(a){d.formatName(a)}),_.each(a.newMatch.performer.address,function(a){d.formatAddress(a)})}),d.formatQuantity(a.newMatch.administration.dose)})}a.entryType="immunizations",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.match=[];var h={product:null,administration:null};a.selected=angular.copy(h),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data[d]=a.match[b].newMatch[d]:c===!1?(a.match[b].srcMatch.data[d]=a.match[b].origMatch[d],f(),g()):_.isObject(c)&&(c.status===!0?a.match[b].srcMatch.data[d].status=a.match[b].newMatch[d].status:c.status===!1&&(a.match[b].srcMatch.data[d].status=a.match[b].origMatch[d].status))})},a.clearAll=function(b){a.selected=angular.copy(h),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f(),g()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/immunizations")})},a.refresh=function(){e(function(){f(),g()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordConditionsReviewCtrl",["$scope","$location","conditions","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){a.newMatch.date_time&&(_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time)),a.srcMatch.data.date_time&&(_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time))})}function g(){_.each(a.match,function(a){a.srcMatch.data.problem.date_time&&(_.each(a.srcMatch.data.problem.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.problem.date_time.displayDate=d.outputDate(a.srcMatch.data.problem.date_time)),a.newMatch.problem.date_time&&(_.each(a.newMatch.problem.date_time,function(a){d.formatDate(a)}),a.newMatch.problem.date_time.displayDate=d.outputDate(a.newMatch.problem.date_time))})}a.entryType="conditions",a.masterEntries=[],a.entries=[],a.updateDate=null,a.inactiveFlag=!1,a.partialEntries=[],a.alertShow=!0,a.match=[];var h={problem:null};a.selected=angular.copy(h),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data[d]=a.match[b].newMatch[d]:c===!1?(a.match[b].srcMatch.data[d]=a.match[b].origMatch[d],f(),g()):_.isObject(c)&&(c.status===!0?a.match[b].srcMatch.data[d].status=a.match[b].newMatch[d].status:c.status===!1&&(a.match[b].srcMatch.data[d].status=a.match[b].origMatch[d].status),_.each(c.reactions,function(c,e){if(c===!0){var f=a.match[b].newMatch[d].reactions[e];f.srcMatch.dataIndex=e,a.match[b].srcMatch.data[d].reactions||(a.match[b].srcMatch.data[d].reactions=[]),a.match[b].srcMatch.data[d].reactions.push(f)}else c===!1&&_.each(a.match[b].srcMatch.data[d].reactions,function(c,f){c.srcMatch.dataIndex&&c.srcMatch.dataIndex===e&&(console.log(f),a.match[b].srcMatch.data[d].reactions.splice(f))})}))})},a.clearAll=function(b){a.selected=angular.copy(h),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f(),g()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/conditions")})},a.refresh=function(){e(function(){f(),g()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordMedicationsReviewCtrl",["$scope","$location","medications","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time)})}a.entryType="medications",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.match=[];var g={date_time:null,status:null,administration:{route:null,form:null}};a.selected=angular.copy(g),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data[d]=a.match[b].newMatch[d]:c===!1?(a.match[b].srcMatch.data[d]=a.match[b].origMatch[d],f()):_.isObject(c)&&_.each(c,function(c,d){c===!0?a.match[b].srcMatch.data.administration[d]=a.match[b].newMatch.administration[d]:c===!1&&(a.match[b].srcMatch.data.administration[d]=a.match[b].origMatch.administration[d])})})},a.clearAll=function(b){a.selected=angular.copy(g),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/medications")})},a.ignoreUpdate=function(c){a.selected=angular.copy(g),a.match[c].srcMatch.data=angular.copy(a.match[c].origMatch),f(),b.path("/record/medications")},a.refresh=function(){e(function(){f()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordProceduresReviewCtrl",["$scope","$location","procedures","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time)})}function g(){_.each(a.match,function(a){_.each(a.newMatch.performer,function(a){_.each(a.address,function(a){d.formatAddress(a)}),_.each(a.organization,function(a){_.each(a.address,function(a){d.formatAddress(a)})})}),_.each(a.srcMatch.data.performer,function(a){_.each(a.address,function(a){d.formatAddress(a)}),_.each(a.organization,function(a){_.each(a.address,function(a){d.formatAddress(a)})})})})}a.entryType="procedures",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.match=[];var h={performer:null};a.selected=angular.copy(h),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data[d]=a.match[b].newMatch[d]:c===!1?(a.match[b].srcMatch.data[d]=a.match[b].origMatch[d],f(),g()):_.isObject(c)})},a.clearAll=function(b){a.selected=angular.copy(h),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f(),g()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/procedures")})},a.refresh=function(){e(function(){f(),g()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordResultsReviewCtrl",["$scope","$location","results","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){var b=[];a.newMatch.date_time={},a.srcMatch.data.date_time={},_.each(a.newMatch.results,function(a){_.each(a.date_time,function(a,c){"displayDate"!==c&&(a.displayDate||d.formatDate(a),b.push(moment(a.date)))}),a.date_time.displayDate||(a.date_time.displayDate=d.outputDate(a.date_time))});var c=moment.min(b),e=moment.max(b);c.isSame(e,"day")&&(a.newMatch.date_time.point={},a.newMatch.date_time.point.date=c.toISOString(),a.newMatch.date_time.point.precision="day"),_.each(a.newMatch.date_time,function(a){a.displayDate=d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),a.newMatch.date_time.plotDate=d.plotDate(a.newMatch.date_time),_.each(a.srcMatch.data.results,function(a){_.each(a.date_time,function(a,c){"displayDate"!==c&&(a.displayDate||d.formatDate(a),b.push(moment(a.date)))}),a.date_time.displayDate||(a.date_time.displayDate=d.outputDate(a.date_time))});var c=moment.min(b),e=moment.max(b);c.isSame(e,"day")&&(a.srcMatch.data.date_time.point={},a.srcMatch.data.date_time.point.date=c.toISOString(),a.srcMatch.data.date_time.point.precision="day"),_.each(a.srcMatch.data.date_time,function(a){a.displayDate=d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time),a.srcMatch.data.date_time.plotDate=d.plotDate(a.srcMatch.data.date_time)})}function g(){_.each(a.match,function(a){d.formatQuantity(a.newMatch),d.formatQuantity(a.srcMatch.data)})}a.entryType="results",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.match=[];var h={result_set:null,results:null};a.selected=angular.copy(h),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data=a.match[b].newMatch:c===!1?(a.match[b].srcMatch.data=a.match[b].origMatch,f(),g()):_.isObject(c)&&(c.status===!0?a.match[b].srcMatch.data[d].status=a.match[b].newMatch[d].status:c.status===!1&&(a.match[b].srcMatch.data[d].status=a.match[b].origMatch[d].status))})},a.clearAll=function(b){a.selected=angular.copy(h),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f(),g()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/results")})},a.refresh=function(){e(function(){f(),g()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordVitalsReviewCtrl",["$scope","$location","vitals","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time)})}function g(){_.each(a.match,function(a){d.formatQuantity(a.newMatch),d.formatQuantity(a.srcMatch.data)})}a.entryType="vitals",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.match=[];var h={value:null};a.selected=angular.copy(h),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data=a.match[b].newMatch:c===!1?(a.match[b].srcMatch.data=a.match[b].origMatch,f(),g()):_.isObject(c)&&(c.status===!0?a.match[b].srcMatch.data[d].status=a.match[b].newMatch[d].status:c.status===!1&&(a.match[b].srcMatch.data[d].status=a.match[b].origMatch[d].status))})},a.clearAll=function(b){a.selected=angular.copy(h),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f(),g()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/vitals")})},a.refresh=function(){e(function(){f(),g()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("RecordSocialReviewCtrl",["$scope","$location","social","format",function(a,b,c,d){function e(b){c.getPartialMatch(function(c,d){a.match=d,_.each(a.match,function(a){a.origMatch=angular.copy(a.srcMatch.data)}),b()})}function f(){_.each(a.match,function(a){_.each(a.newMatch.date_time,function(a){d.formatDate(a)}),a.newMatch.date_time.displayDate=d.outputDate(a.newMatch.date_time),_.each(a.srcMatch.data.date_time,function(a){d.formatDate(a)}),a.srcMatch.data.date_time.displayDate=d.outputDate(a.srcMatch.data.date_time)})}a.entryType="social",a.masterEntries=[],a.entries=[],a.updateDate=null,a.partialEntries=[],a.alertShow=!0,a.match=[];var g={date_time:null};a.selected=angular.copy(g),a.closeAlert=function(){a.alertShow=!1},a.selectEntry=function(b){_.each(a.selected,function(c,d){c===!0?a.match[b].srcMatch.data[d]=a.match[b].newMatch[d]:c===!1?(a.match[b].srcMatch.data[d]=a.match[b].origMatch[d],f()):_.isObject(c)&&(c.status===!0?a.match[b].srcMatch.data[d].status=a.match[b].newMatch[d].status:c.status===!1&&(a.match[b].srcMatch.data[d].status=a.match[b].origMatch[d].status),_.each(c.reactions,function(c,e){if(c===!0){var f=a.match[b].newMatch[d].reactions[e];f.srcMatch.dataIndex=e,a.match[b].srcMatch.data[d].reactions||(a.match[b].srcMatch.data[d].reactions=[]),a.match[b].srcMatch.data[d].reactions.push(f)}else c===!1&&_.each(a.match[b].srcMatch.data[d].reactions,function(c,f){c.srcMatch.dataIndex&&c.srcMatch.dataIndex===e&&(console.log(f),a.match[b].srcMatch.data[d].reactions.splice(f))})}))})},a.clearAll=function(b){a.selected=angular.copy(g),a.match[b].srcMatch.data=angular.copy(a.match[b].origMatch),f()},a.saveUpdate=function(d){console.log(a.match[d].srcMatch.data),c.saveEntry(a.match[d].srcMatch.data,function(){b.path("/record/social")})},a.refresh=function(){e(function(){f()})},a.refresh()}]),angular.module("phrPrototypeApp").controller("bonusCtrl",["$scope","$location",function(){$(window).konami({cheat:function(){document.getElementById("index-wrapper").style.backgroundImage="url(../../images/va_photo.jpg)",document.getElementById("index-wrapper").style.backgroundRepeat="repeat",setTimeout(function(){document.getElementById("index-wrapper").style.backgroundImage="url(../../images/blur.png)",document.getElementById("index-wrapper").style.backgroundRepeat="no repeat"},2e3)}})}]),angular.module("d3",[]).factory("d3Service",["$document","$window","$q","$rootScope",function(a,b,c,d){function e(){d.$apply(function(){g.resolve(b.d3)})}function f(){d.$apply(function(){h.resolve(b.d3tip)})}var g=c.defer(),h=c.defer(),i={d3:function(){return g.promise},d3tip:function(){return h.promise}},j=a[0].createElement("script");j.type="text/javascript",j.async=!0,j.src="bower_components/d3/d3.js";var k=a[0].createElement("script");k.type="text/javascript",k.async=!0,k.src="bower_components/d3-tip/index.js",j.onreadystatechange=function(){"complete"===this.readyState&&e()},k.onreadystatechange=function(){"complete"===this.readyState&&f()},j.onload=e,k.onload=f;var l=a[0].getElementsByTagName("body")[0];return l.appendChild(j),l.appendChild(k),i}]),angular.module("phrPrototypeApp").controller("NotesCtrl",["$scope","notes",function(a,b){function c(){b.getNotes(function(b,c){a.notes=[],a.notes=c})}a.notes=[],a.filters=[{name:"starred",value:!0,displayName:"starred"},{name:"unStarred",value:!1,displayName:"un-starred"},{name:"medications",value:!0,displayName:"medications"},{name:"results",value:!0,displayName:"test results"},{name:"encounters",value:!0,displayName:"encounters"},{name:"vitals",value:!0,displayName:"vital signs"},{name:"immunizations",value:!0,displayName:"immunizations"},{name:"allergies",value:!0,displayName:"allergies"},{name:"conditions",value:!0,displayName:"conditions"},{name:"procedures",value:!0,displayName:"procedures"},{name:"social",value:!0,displayName:"social history"},{name:"claims",value:!0,displayName:"claims"},{name:"insurance",value:!0,displayName:"insurance"}],a.toggle=function(b){a.filters[b].value=!a.filters[b].value},a.toggleAll=function(){_.each(a.filters,function(b,c){a.filters[c].value=!0})},a.clickStar=function(b,c,d){var e=_.where(a.notes,{section:d});e[0].notes[c].note.starred=b?!1:!0},c()}]),angular.module("phrPrototypeApp").service("notes",["allergies","encounters","immunizations","medications","conditions","procedures","vitals","results","social","claims","insurance","format",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){a.getRecord(function(a,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.observation.allergen.name&&(c.entryTitle=a.data.observation.allergen.name),a.data.observation.severity.code.name&&(c.entrySubTitleOne=a.data.observation.severity.code.name),a.data.observation.date_time&&(_.each(a.data.observation.date_time,function(a){l.formatDate(a)}),a.data.observation.date_time.displayDate=l.outputDate(a.data.observation.date_time),c.entrySubTitleTwo=a.data.observation.date_time.displayDate),d.push(c)})});var e={section:"allergies",displaySection:"allergies",notes:d};b(null,e)})}function n(a){b.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.encounter.name&&(c.entryTitle=a.data.encounter.name),a.data.locations[0].name&&(c.entrySubTitleOne=a.data.locations[0].name),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleTwo=a.data.date_time.displayDate),d.push(c)})});var e={section:"encounters",displaySection:"encounters",notes:d};a(null,e)})}function o(a){c.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.product.product.name&&(c.entryTitle=a.data.product.product.name),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleOne=a.data.date_time.displayDate),d.push(c)})});var e={section:"immunizations",displaySection:"immunizations",notes:d};a(null,e)})}function p(a){d.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.product.product.name&&(c.entryTitle=a.data.product.product.name),a.data.administration.route.name&&(c.entrySubTitleOne=a.data.administration.route.name),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleTwo=a.data.date_time.displayDate),d.push(c)})});var e={section:"medications",displaySection:"medications",notes:d};a(null,e)})}function q(a){e.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.problem.code.name&&(c.entryTitle=a.data.problem.code.name),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleOne=a.data.date_time.displayDate),d.push(c)})});var e={section:"conditions",displaySection:"conditions",notes:d};a(null,e)})}function r(a){f.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.procedure.name&&(c.entryTitle=a.data.procedure.name),a.data.status&&(c.entrySubTitleOne=a.data.status),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleTwo=a.data.date_time.displayDate),d.push(c)})});var e={section:"procedures",displaySection:"procedures",notes:d};a(null,e)})}function s(a){g.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data&&(c.entryTitle=l.formatQuantity(a.data).displayQuantity),a.data.vital.name&&(c.entrySubTitleOne=a.data.vital.name),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleTwo=a.data.date_time.displayDate),d.push(c)})});var e={section:"vitals",displaySection:"vital signs",notes:d};a(null,e)})}function t(a){h.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.result_set.name&&(c.entryTitle=a.data.result_set.name);var e=[];a.data.date_time={},_.each(a.data.results,function(a){_.each(a.date_time,function(a,b){"displayDate"!==b&&(a.displayDate||l.formatDate(a),e.push(moment(a.date)))}),a.date_time.displayDate||(a.date_time.displayDate=l.outputDate(a.date_time))});var f=moment.min(e),g=moment.max(e);f.isSame(g,"day")&&(a.data.date_time.point={},a.data.date_time.point.date=f.toISOString(),a.data.date_time.point.precision="day"),_.each(a.data.date_time,function(a){a.displayDate=l.formatDate(a)}),c.entrySubTitleOne=l.outputDate(a.data.date_time),d.push(c)})});var e={section:"results",displaySection:"test results",notes:d};a(null,e)})}function u(a){i.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data.value&&(c.entryTitle=a.data.value),a.data.code.name&&(c.entrySubTitleOne=a.data.code.name),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleTwo=a.data.date_time.displayDate),d.push(c)})});var e={section:"social",displaySection:"social history",notes:d};a(null,e)})}function v(a){j.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data&&(c.entryTitle=a.data.payer[0]),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleOne=a.data.date_time.displayDate),d.push(c)})});var e={section:"claims",displaySection:"claims",notes:d};a(null,e)})}function w(a){k.getRecord(function(b,c){var d=[];_.each(c,function(a){a.metadata.comments&&_.each(a.metadata.comments,function(b){var c={note:b};a.data&&(c.entryTitle=a.data.name),a.data.date_time&&(_.each(a.data.date_time,function(a){l.formatDate(a)}),a.data.date_time.displayDate=l.outputDate(a.data.date_time),c.entrySubTitleOne=a.data.date_time.displayDate),d.push(c)})});var e={section:"insurance",displaySection:"insurance",notes:d};a(null,e)})}var x=[],y=function(a){function b(){c++,11===c&&a(null,x)}x=[];var c=0;p(function(a,c){x=x.concat(c),b()}),t(function(a,c){x=x.concat(c),b()}),n(function(a,c){x=x.concat(c),b()}),s(function(a,c){x=x.concat(c),b()}),o(function(a,c){x=x.concat(c),b()}),m(function(a,c){x=x.concat(c),b()}),q(function(a,c){x=x.concat(c),b()}),r(function(a,c){x=x.concat(c),b()}),u(function(a,c){x=x.concat(c),b()}),v(function(a,c){x=x.concat(c),b()}),w(function(a,c){x=x.concat(c),b()})};this.getNotes=y;var z=function(a){y(function(b,c){var d=0;_.each(c,function(a){_.each(a.notes,function(a){a.note.starred&&d++})}),a(null,d)})};this.noteCount=z}]),angular.module("phrPrototypeApp").directive("entry",function(){return{templateUrl:"views/templates/entry.html",restrict:"EA",link:function(a,b,c){function d(){var b=0;_.each(a.entryMetaData.comments,function(a){a.starred&&b++}),a.entryMetaData.starred_comments=b}var e=c.entryType;switch(a.entryIndex=c.entryIndex,a.entryData=a.recordEntry.data,a.entryMetaData=a.recordEntry.metadata,a.entryTitle="",a.entrySubTitleOne="",a.entrySubTitleTwo="",e){case"allergies":a.entryTitle=a.entryData.observation.allergen.name,a.entrySubTitleOne=a.entryData.observation.severity.code.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";
break;case"encounters":a.entryTitle=a.entryData.encounter.name,a.entrySubTitleOne=a.entryData.locations[0].name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"immunizations":a.entryTitle=a.entryData.product.product.name,a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"medications":a.entryTitle=a.entryData.product.product.name,a.entrySubTitleOne=a.entryData.administration.route.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"conditions":a.entryTitle=a.entryData.problem.code.name,a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"procedures":a.entryTitle=a.entryData.procedure.name,a.entrySubTitleOne=a.entryData.status,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"vitals":a.entryTitle=a.entryData.displayQuantity,a.entrySubTitleOne=a.entryData.vital.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"results":a.entryTitle=a.entryData.result_set.name,a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"social":a.entryTitle=a.entryData.value,a.entrySubTitleOne=a.entryData.code.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"claims":a.entryTitle=a.entryData.payer[0],a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"insurance":a.entryTitle=a.entryData.name,a.entryData.date_time&&(a.entrySubTitleOne=a.entryData.date_time.displayDate),a.entryTemplatePath="/views/templates/details/"+e+".html"}d(),a.swapTabs=function(a,b){"details"===a?($("#comments"+b).removeClass("in"),$("#history"+b).removeClass("in")):"comments"===a?($("#details"+b).removeClass("in"),$("#history"+b).removeClass("in")):"history"===a&&($("#details"+b).removeClass("in"),$("#comments"+b).removeClass("in"))},a.clickStar=function(b,c){a.entryMetaData.comments[c].starred=b?!1:!0,d()},a.newStar=function(b){a.newComment.starred=b?!1:!0},a.addNote=function(){a.newComment.date=new Date,a.entryMetaData.comments.push(a.newComment),a.newComment={starred:!1},d()}}}}),angular.module("phrPrototypeApp").directive("billingentry",function(){return{templateUrl:"views/templates/billingentry.html",restrict:"EA",link:function(a,b,c){function d(){var b=0;_.each(a.entryMetaData.comments,function(a){a.starred&&b++}),a.entryMetaData.starred_comments=b}var e=c.entryType;switch(a.entryIndex=c.entryIndex,a.entryData=a.recordEntry.data,a.entryMetaData=a.recordEntry.metadata,a.entryTitle="",a.entrySubTitleOne="",a.entrySubTitleTwo="",e){case"allergies":a.entryTitle=a.entryData.observation.allergen.name,a.entrySubTitleOne=a.entryData.observation.severity.code.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"encounters":a.entryTitle=a.entryData.encounter.name,a.entrySubTitleOne=a.entryData.locations[0].name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"immunizations":a.entryTitle=a.entryData.product.product.name,a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"medications":a.entryTitle=a.entryData.product.product.name,a.entrySubTitleOne=a.entryData.administration.route.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"conditions":a.entryTitle=a.entryData.problem.code.name,a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"procedures":a.entryTitle=a.entryData.procedure.name,a.entrySubTitleOne=a.entryData.status,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"vitals":a.entryTitle=a.entryData.displayQuantity,a.entrySubTitleOne=a.entryData.vital.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"results":a.entryTitle=a.entryData.result_set.name,a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"social":a.entryTitle=a.entryData.value,a.entrySubTitleOne=a.entryData.code.name,a.entrySubTitleTwo=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"claims":a.entryTitle=a.entryData.payer[0],a.entrySubTitleOne=a.entryData.date_time.displayDate,a.entryTemplatePath="/views/templates/details/"+e+".html";break;case"insurance":a.entryTitle=a.entryData.name,a.entryData.date_time&&(a.entrySubTitleOne=a.entryData.date_time.displayDate),a.entryTemplatePath="/views/templates/details/"+e+".html"}d(),a.swapTabs=function(a,b){"details"===a?($("#comments"+b).removeClass("in"),$("#history"+b).removeClass("in")):"comments"===a?($("#details"+b).removeClass("in"),$("#history"+b).removeClass("in")):"history"===a&&($("#details"+b).removeClass("in"),$("#comments"+b).removeClass("in"))},a.clickStar=function(b,c){a.entryMetaData.comments[c].starred=b?!1:!0,d()},a.newStar=function(b){a.newComment.starred=b?!1:!0},a.addNote=function(){a.newComment.date=new Date,a.entryMetaData.comments.push(a.newComment),a.newComment={starred:!1},d()}}}}),angular.module("phrPrototypeApp").filter("starred",function(){return function(a,b){var c=[];return _.each(a,function(a){_.each(b,function(b){"starred"===b.name&&b.value&&a.note.starred&&c.push(a),"unStarred"===b.name&&b.value&&(a.note.starred||c.push(a))})}),c}}),angular.module("phrPrototypeApp").filter("sections",function(){return function(a,b){var c=[];return _.each(a,function(a){_.each(b,function(b){b.name===a.section&&b.value&&c.push(a)})}),c}}),angular.module("phrPrototypeApp").controller("titleController",["$rootScope","$scope","$location",function(a,b,c){b.pageTitle="My PHR";var d={home:"Home",record:"My Record",notes:"My Notes",files:"My Files",profile:"My Profile",account:"My Account","billing/insurance":"My Insurance","billing/claims":"My Claims","record/medications":"My Medications","record/results":"My Results","record/encounters":"My Encounters","record/vitals":"My Vital Signs","record/immunizations":"My Immunizations","record/allergies":"My Allergies","record/conditions":"My Conditions","record/procedures":"My Procedures","record/social":"My Social History",register:"Registration",login:"Login","files/upload":"Upload","record/medications/review":"My Medications","record/results/review":"My Results","record/encounters/review":"My Encounters","record/vitals/review":"My Vital Signs","record/immunizations/review":"My Immunizations","record/allergies/review":"My Allergies","record/conditions/review":"My Conditions","record/procedures/review":"My Procedures","record/social/review":"My Social History"};a.$on("$routeChangeSuccess",function(){b.pageTitle="My PHR";var a=c.path().substring(1);d[a]&&(b.pageTitle=b.pageTitle+" | "+d[a])})}]);